# {{ ansible_managed }}
# DO NOT EDIT MANUALLY

###############################################################################
# AGENT BEHAVIOUR

agentAddress udp:{{ snmpd_agent_address }}:{% if snmpd_agent_port is defined %}{{ snmpd_agent_port }}{% else %}161
{% endif %}

###############################################################################
# ACCESS CONTROL

view   systemonly  included   .1.3.6.1.2.1.1
view   systemonly  included   .1.3.6.1.2.1.25.
{% for s in snmpd_view_configuration %}
{% for r in s.configuration %}
{% if r.view is defined %}view{% else %}{% endif %}	{% if r.view_name is defined %}{{ r.view_name }}{% else %}{% endif %}	included   {% if r.oid_tree is defined %}{ r.oid_tree }{% else %}{% endif %}
{% endfor %}
{% endfor %}

rocommunity {% if snmpd_community is defined %}{{ snmpd_community }}{% else %} public  default -V systemonly
{% endif %}

rocommunity6 {% if snmpd_communityv6 is defined %}{{ snmpd_communityv6 }}{% else %} public  default -V systemonly
{% endif %}

rouser   authOnlyUser

###############################################################################
# SYSTEM INFORMATION

sysLocation              {{ snmpd_location }}
sysContact               {{ snmpd_contact }}
sysServices              {{ snmpd_services }}

#  Process Monitoring
{% for s in snmpd_proc_configuration %}
{% for r in s.proc_conf %}
{% if r.proc is defined %}proc{% else %}{% endif %} {% if r.proc_name is defined %}{{ r.proc_name }}{% else %}{% endif %}  {% if r.proc_interval is defined %}{{ r.proc_interval }}{% else %}{% endif %}
{% endfor %}
{% endfor %}

#  Disk Monitoring

{% for s in snmpd_disk_configuration %}
{% for r in s.disk_conf %}
{% if r.disk is defined %}disk{% else %}{% endif %} {% if r.disk_path is defined %}{{ r.disk_path }}{% else %}{% endif %}  {% if r.disk_percentage is defined %}{{ r.disk_percentage }}{% else %}{% endif %}
{% endfor %}
{% endfor %}

#  System Load

{% for s in snmpd_load_configuration %}
{% for r in s.load_conf %}
{% if r.load is defined %}load{% else %}{% endif %} {% if r.load_interval is defined %}{{ r.load_interval }}{% else %}{% endif %}
{% endfor %}
{% endfor %}

###############################################################################
# ACTIVE MONITORING

{% if snmpd_trapsink is defined %}trapsink {{ snmpd_trapsink }}{% else %}localhost public
{% endif %}

{% if snmpd_trap2sink is defined %}trap2sink {{ snmpd_trap2sink }}{% else %}localhost public
{% endif %}


iquerySecName            internalUser
rouser                   internalUser

defaultMonitors          yes
linkUpDownNotifications  yes

###############################################################################
# EXTENDING THE AGENT

{% if snmpd_extend is defined %}extend {{ snmpd_extend }}{% else %}
{% endif %}

{% if snmpd_extend_sh is defined %}extend-sh {{ snmpd_extend_sh }}{% else %}
{% endif %}
  
{% if snmpd_master is defined %}master {{ snmpd_master }}{% else %}
{% endif %}
